<% layout('client/layout') -%>
<base href="https://cryptic-scrubland-62025.herokuapp.com">
    <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7">
                <% post.forEach(function(post) { %>
                <div class="post-preview">
                    <a href="/post/<%= post._id %>">
                        <h2 class="post-title"> <%= post.title %> </h2>
                        <h3 class="post-subtitle"><%= post.description %></h3>
                    </a>
                    <p class="post-meta">
                        Posted by
                        <a href="#!"><%= post.userId.name %></a>
                        on <%= post.createdAt %>
                    </p>
                </div>
                <% }); %>
                <!-- Divider-->
                <hr class="my-4" />
    <div>
        <div class="row">
            <!-- hiển thị phân trang nếu có trang -->
            <% if(pages > 0) { %>
            <nav class="mx-auto">
              <ul class="pagination" style="margin-top: 2rem;">
              
                <!-- FIRST ITEM -->  
                <% if(page == 1) { %> 
                    <li class="page-item disabled">
                      <a class="page-link" href="">First</a>
                    </li>
                <% } else { %>
                    <li class="page-item">
                      <a class="page-link" href="/index/1">First</a>
                    </li>
                <% } %>
                
                <!-- ITEMS  -->
                <% var i = (Number(page) > 3 ? Number(page) - 2 : 1) %> 
                <% if(i !== 1) { %>
                    <li class="page-item disabled">
                      <a class="page-link" href="#">...</a>
                    </li>
                <% } %>
                <% for(; i <= (Number(page) + 2) && i <= pages; i++) { %>
                  <% if(i == page) { %>
                    <li class="page-item active">
                      <a class="page-link" href="/index/<%= i %>">
                        <%= i %>
                      </a>
                    </li>
                <% } else { %>
                    <li class="page-item">
                      <a class="page-link" href="/index/<%= i %>">
                        <%= i %>
                      </a>
                    </li>
                <% } %>
                <% if (i == Number(page) + 2 && i < pages) { %>
                    <li class="page-item disabled">
                      <a class="page-link" href="#">...</a>
                    </li>
                <% } %>
                <% } %>
                
                <!-- LAST ITEM -->
                <% if(page == pages) { %> 
               
                    <li class="page-item disabled">
                      <a class="page-link" href="#">
                        Last
                      </a>
                    </li>
                <% } else { %>
                
                    <li class="page-item">
                      <a class="page-link" href="/index/<%= pages %>">
                        Last
                      </a>
                    </li>
                <% } %>
              </ul>
            </nav>
            <% } %>
        </div>
